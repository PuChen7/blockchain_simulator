# Blockchain
## Versions
[Java Version](https://github.com/PuChen7/blockchain_simulator/tree/master/blockchain-java)

[Javascript Version](https://github.com/PuChen7/blockchain_simulator)

[Python Version](https://github.com/PuChen7/blockchain_simulator/tree/master/blockchain_python)

## Introduction
### Block has following properties
* Timestamp
* lastHash - the hash of the previous block 
* hash - hash based on its own data
* data
* nonce - used in proof of work
* difficulty

### Generating Hash
Block hash is generated by combination of `timestamp, lastHash, data, nonce, difficulty`. 

The program combines `timestamp, lastHash, data, nonce, difficulty` into one String and uses `SHA256()` to generate a unique hash value.

### Adding Block
First, the program gets the last block in the chain, and call `mineBlock()` which returns the newly generated block, then push the new block into the chain.

### Mining Blocks `(Proof of Work)`
Mining time is controlled by `DIFFICULTY` and `MINE_RATE` in a `do-while` loop. 

`DIFFICULTY` is used for determining how many leading zeros the unique hash contains.

`MINE_RATE` is set to 3000 milliseconds(3 seconds) initially which means it should take around `MINE_RATE` for mining the new block.

`DIFFICULTY` is recalculated in `do-while` loop:
```java
 difficulty = lastBlock.timestamp + MINE_RATE > currentTime ? difficulty + 1 : difficulty - 1;
```

### Multiple Chains Validation (Longer Chains)
When multiple miners adding new chains, the system needs to determine which chain is valid and should be accepted. 

The chain which is the `longest` will be accepted. 

### Wallet
Wallets store the balance of an individual.

Wallets store an individual's `keys`.

* `Private Key` - used to generate signatures
* `Public Key` - used to verify signatures and public address

Key is an unique String of numbers. 

### Transactions
Transaction contains `three` parts:
* `Input`: a reference to an output from a `previous` transaction. (Have reference to total balance)
* `Amount`: transfer amount
* `Output`: a list of recipients(recipient's public key)

#### Transaction Pool
Individuals submit `transactions`(unconfirmed since they have not been mined to blockchain yet).

`Miners` take `transactions` from the pool and store them into `blocks`.

Miners are `rewarded` for mining.

Transactions go from `unconfirmed` in the pool to `confirmed` in the chain.